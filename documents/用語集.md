ã‚ãªãŸã¯å„ªç§€ãªãƒ•ãƒ«ã‚¹ã‚¿ãƒƒã‚¯ãƒ—ãƒ­ã‚°ãƒ©ãƒã§ã™ã€‚
ç§ã¯Webã‚¢ãƒ—ãƒªåˆå¿ƒè€…ã§ã™ã€‚ã“ã‚Œã¾ã§ã¯C/C++/C#,Java,Python,Perlã‚’ä½¿ã£ã¦ãã¾ã—ãŸã€‚
ä»¥ä¸‹ã®å†…å®¹ã§å­¦ç¿’ç”¨ã«ã€Œç”¨èªé›†ã€ã‚’ç™»éŒ²é–²è¦§å‡ºæ¥ã‚‹Webã‚¢ãƒ—ãƒªã‚’ä½œã‚ã†ã¨æ€ã„ã¾ã™ã€‚
# æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯
- VSCode+GitHub+Dockerå‰æã§Windows11Proãƒã‚·ãƒ³ã‹ã‚‰Proxmoxä¸Šã®Ubuntu server 24.04LTSã«SSHæ¥ç¶šã—ã¦é–‹ç™ºã™ã‚‹äºˆå®šã§ã™ã€‚
- ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼šReact + TypeScript (Vite)+Tailwind CSS
- ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼šNestJS+TypeScript+prisma
ã€€**ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã¯ã§ãã‚‹é™ã‚Šã€ Web APIåŒ–ã—ã¦ãã ã•ã„**
- Webã‚µãƒ¼ãƒï¼šnginx
- DBï¼šPostgreSQL
# æ©Ÿèƒ½è¦ä»¶å®šç¾©
## ä¸»è¦æ©Ÿèƒ½
### ç™»éŒ²æ©Ÿèƒ½
- ç”¨èªã¨ã—ã¦`è¦‹å‡ºã—`ã¨`æœ¬æ–‡`ï¼ˆmarkdownå½¢å¼ï¼‰ã‚’ç™»éŒ²ã™ã‚‹æ©Ÿèƒ½
- ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã§ã¯markdownã‚’Htmlã«å¤‰æ›ã—ã¦`è¦‹å‡ºã—`ã¨ã¨ã‚‚ã«DBã«ç™»éŒ²ã™ã‚‹æ©Ÿèƒ½
  ã‚‚ã¨ã®markdownãƒ•ã‚¡ã‚¤ãƒ«ã¯ãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦ä¿å­˜ã—ã¦ã€ãƒ•ã‚¡ã‚¤ãƒ«åã‚’DBã«ç™»éŒ²
### æ¤œç´¢æ©Ÿèƒ½
- ç™»éŒ²ã•ã‚Œã¦ã„ã‚‹ç”¨èªã‚’`è¦‹å‡ºã—`ã§ã‚½ãƒ¼ãƒˆã—ã¦è¡¨ç¤ºã™ã‚‹æ©Ÿèƒ½
- è¦‹å‡ºã—ãŒé¸æŠã•ã‚ŒãŸã‚‰DBã‚’æ¤œç´¢ã—ã¦`æœ¬æ–‡`ã®Htmlã‚’è¡¨ç¤ºã™ã‚‹æ©Ÿèƒ½
ã¾ãšã¯ã“ã®ã‚ˆã†ãªæ„Ÿã˜ã§å­¦ç¿’ã‚’å§‹ã‚ã¦ã¿ãŸã„ã§ã™ã€‚
- ã‚ãªãŸã«ã¯æœ€åˆã®ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦ãã ã•ã„ã€‚
- ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆã‚„ãƒ—ãƒ­ã‚°ãƒ©ãƒ ä¸­èº«ã¯**ä¸€åˆ‡çœç•¥ã›ãš**ç¤ºã—ã¦ãã ã•ã„ã€‚
- è¶³ã‚Šãªã„æƒ…å ±ãŒã‚ã‚Œã°èã„ã¦ãã ã•ã„ã€‚
## è£œè¶³
ã“ã®å¾Œã¯ã€CI/CDã‚’æƒ³å®šã—ã¦ã„ã¾ã™ã€‚
- ç·´ç¿’ã®ãŸã‚ã«Proxmoxä¸Šã«ã‚µãƒ¼ãƒã‚’å¢—ã‚„ã™ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚
- Iacã¯terraformã‚’ä½¿ã†äºˆå®šã§ã™ã€‚
ãã‚Œã‚’å¿µé ­ã«ç½®ã„ã¦ã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã—ã¦ãã ã•ã„ã€‚

å‹æ‰‹ã«åˆ¤æ–­ã—ã¦å…ˆã«é€²ã‚ãšã€ã¾ãšã€ã‚ãªãŸãŒãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’ä½œæˆã™ã‚‹ã†ãˆã§è¶³ã‚Šãªã„ã¨æ€ã†ã¨ã“ã‚ã‚’èã„ã¦ãã ã•ã„ã€‚

---

## ã¯ã˜ã‚ã«

ã”æç¤ºã„ãŸã ã„ãŸè¦ä»¶ã¯ã™ã¹ã¦æŠŠæ¡ã§ãã¾ã—ãŸãŒã€å®Ÿè£…ã‚’ã‚¹ãƒ ãƒ¼ã‚ºã«é€²ã‚ã‚‹ãŸã‚ã« **ã„ãã¤ã‹ç¢ºèªã—ãŸã„ç‚¹ãŒã‚ã‚Šã¾ã™**ã€‚  
ä»¥ä¸‹ã®è³ªå•ã«ãŠç­”ãˆã„ãŸã ã‘ã‚Œã°ã€ãã®æƒ…å ±ã‚’ã‚‚ã¨ã«ã€Œç”¨èªé›†ã€ã‚¢ãƒ—ãƒªå…¨ä½“ã®ãƒªãƒã‚¸ãƒˆãƒªæ§‹æˆãƒ»Dockerfileãƒ»dockerâ€‘composeã€NestJS ã® APIï¼ˆCRUDï¼‹Markdown â†’ HTML å¤‰æ›ï¼‰ ã€React + Vite ã®ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Ÿè£…ã€CI/CD ç”¨ GitHub Actionsã€Terraform ã®ã‚µãƒ³ãƒ—ãƒ«ã¾ã§ä¸€å¼ã‚’ã”æä¾›ã§ãã¾ã™ã€‚

## 1. ãƒ‡ãƒ—ãƒ­ã‚¤ç’°å¢ƒãƒ»ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯

| é …ç›® | è³ªå• |
|------|------|
| **ãƒ‰ãƒ¡ã‚¤ãƒ³ï¼ãƒ›ã‚¹ãƒˆå** | æœ¬ç•ª/ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ã§åˆ©ç”¨ã™ã‚‹ FQDNï¼ˆä¾‹: `glossary.example.com`ï¼‰ã¯æ±ºã¾ã£ã¦ã„ã¾ã™ã‹ï¼Ÿ |
| **HTTPS è¨¼æ˜æ›¸** | Letâ€™s Encrypt ã‚’è‡ªå‹•å–å¾—ã—ãŸã„ã§ã™ã‹ï¼Ÿ ãã‚Œã¨ã‚‚è‡ªå·±ç½²åè¨¼æ˜æ›¸ã§æ§‹ã‚ãªã„ã§ã™ã‹ï¼Ÿ |
| **ãƒãƒ¼ãƒˆæ§‹æˆ** | Nginx ãŒãƒªãƒãƒ¼ã‚¹ãƒ—ãƒ­ã‚­ã‚·ã¨ã—ã¦ `80/443` ã‚’å—ã‘ã€NestJS ã¯å†…éƒ¨çš„ã«ã©ã®ãƒãƒ¼ãƒˆï¼ˆä¾‹: `3000`ï¼‰ã§å‹•ä½œã•ã›ã¾ã™ã‹ï¼Ÿ |
| **Docker ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯** | åŒä¸€ dockerâ€‘compose å†…ã§ `frontend`, `backend`, `db`, `nginx` ãŒç›¸äº’é€šä¿¡ã§ãã‚Œã°è‰¯ã„ã§ã™ã‹ï¼Ÿ ãã‚Œä»¥å¤–ã«åˆ¥ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚„å¤–éƒ¨ DB æ¥ç¶šã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ |

## 2. ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜å…ˆ

- **Markdown åŸç¨¿ãƒ•ã‚¡ã‚¤ãƒ«** ã‚’ã‚µãƒ¼ãƒå´ã«ä¿å­˜ã™ã‚‹ã¨ã‚ã‚Šã¾ã™ãŒã€  
  - ä¿å­˜å ´æ‰€ã¯ã‚³ãƒ³ãƒ†ãƒŠå†…ã®æ°¸ç¶šãƒœãƒªãƒ¥ãƒ¼ãƒ ã§ã™ã‹ï¼Ÿï¼ˆä¾‹: `/data/markdown`ï¼‰  
  - ãƒ•ã‚¡ã‚¤ãƒ«åã¯ `slug`ï¼ˆè¦‹å‡ºã—ã‚’ slug åŒ–ã—ãŸã‚‚ã®ï¼‰ã§ç®¡ç†ã—ãŸã„ã§ã™ã‹ï¼Ÿ

## 3. èªè¨¼ãƒ»æ¨©é™

- ç¾æ®µéšã§ã¯ **èªè¨¼ãªã—** ã®ã‚·ãƒ³ãƒ—ãƒ«ãªå…¬é–‹ã‚¢ãƒ—ãƒªã§è‰¯ã„ã§ã—ã‚‡ã†ã‹ï¼Ÿ  
- å°†æ¥çš„ã«ç®¡ç†è€…ã ã‘ãŒç™»éŒ²/ç·¨é›†ã§ãã‚‹ã‚ˆã†ã«ã—ãŸã„å ´åˆã€ã©ã®èªè¨¼æ–¹å¼ï¼ˆGitHub OAuth, JWT, etc.ï¼‰ã‚’æƒ³å®šã—ã¦ã„ã¾ã™ã‹ï¼Ÿ

## 4. CI/CD ã®ç¯„å›²

| é …ç›® | è³ªå• |
|------|------|
| **ãƒ“ãƒ«ãƒ‰å¯¾è±¡** | ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¨ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ä¸¡æ–¹ã® Docker ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ GitHub Actions ã§ãƒ“ãƒ«ãƒ‰ãƒ»ãƒ—ãƒƒã‚·ãƒ¥ã—ãŸã„ã§ã™ã‹ï¼Ÿ |
| **ãƒ‡ãƒ—ãƒ­ã‚¤å…ˆ** | Proxmox ä¸Šã® VM ã«ç›´æ¥ `docker compose up -d` ã‚’å®Ÿè¡Œã™ã‚‹å½¢ã§è‰¯ã„ã§ã—ã‚‡ã†ã‹ï¼Ÿ ãã‚Œã¨ã‚‚ Kubernetesï¼ˆk3sï¼‰ã‚„ Terraform ã® `proxmox_vm` ãƒªã‚½ãƒ¼ã‚¹çµŒç”±ã§è‡ªå‹•ä½œæˆã—ãŸã„ã§ã™ã‹ï¼Ÿ |
| **ç’°å¢ƒå¤‰æ•°ç®¡ç†** | GitHub Secrets ã« DB æ¥ç¶šæ–‡å­—åˆ—ãƒ»JWT ç§˜å¯†éµç­‰ã‚’æ ¼ç´ã™ã‚‹æƒ³å®šã§ã™ã‹ï¼Ÿ |

## 5. ãƒ†ã‚¹ãƒˆ

- ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆï¼E2E ãƒ†ã‚¹ãƒˆã¯å¿…è¦ã§ã™ã‹ï¼Ÿ  
  - ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã¯ Jestï¼ˆNestJS ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰ã§ã€ãƒ•ãƒ­ãƒ³ãƒˆã¯ Vitest + React Testing Library ã‚’æƒ³å®šã—ã¦ã„ã¾ã™ãŒã€æ–¹é‡ã‚’æ•™ãˆã¦ãã ã•ã„ã€‚

## 6. ãã®ä»–

- **ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ â†’ HTML** ã®å¤‰æ›ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¯ `marked` ã‚„ `markdown-it` ãŒå€™è£œã§ã™ãŒã€å¥½ã¿ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ  
- **Docker ã‚¤ãƒ¡ãƒ¼ã‚¸ã®ãƒ™ãƒ¼ã‚¹**ï¼ˆNode ãƒãƒ¼ã‚¸ãƒ§ãƒ³ï¼‰ã‚„ **OS**ï¼ˆAlpine vs Debian slimï¼‰ã«å¸Œæœ›ãŒã‚ã‚Šã¾ã™ã‹ï¼Ÿ

### æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

ä¸Šè¨˜è³ªå•ã«ã”å›ç­”ã„ãŸã ã‘ã‚Œã°ã€

1. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆã¨ `docker-compose.yml` ã®é››å½¢  
2. NestJSï¼ˆPrisma + Markdown å¤‰æ› APIï¼‰å®Ÿè£…ã‚³ãƒ¼ãƒ‰ä¸€å¼  
3. React/Vite/Tailwind ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Ÿè£…ã‚³ãƒ¼ãƒ‰ä¸€å¼  
4. GitHub Actions ã«ã‚ˆã‚‹ CI/CD ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ä¾‹  
5. Terraform ã§ Proxmox VM ã¨ Docker ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’è‡ªå‹•åŒ–ã™ã‚‹æœ€å°æ§‹æˆ  

**ã™ã¹ã¦ã®ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆDockerfileã€è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã€ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ï¼‰ã‚’çœç•¥ã›ãšã«** æä¾›ã—ã¾ã™ã€‚

ã”ä¸æ˜ç‚¹ã‚„è¿½åŠ ã—ãŸã„è¦ä»¶ãŒã‚ã‚Œã°é æ…®ãªãæ•™ãˆã¦ãã ã•ã„ã€‚  
ãã‚Œã‚‰ã‚’è¸ã¾ãˆã¦ã™ãã«ã‚³ãƒ¼ãƒ‰ç”Ÿæˆã¸ç§»ã‚Šã¾ã™ï¼ ğŸ™Œ

---

1. ãƒ‰ãƒ¡ã‚¤ãƒ³ï¼ãƒ›ã‚¹ãƒˆåï¼šæ±ºã¾ã£ã¦ã„ã¾ã›ã‚“ã€‚ã¨ã‚Šã‚ãˆãšã€IPã‚¢ãƒ‰ãƒ¬ã‚¹ã§é€²ã‚ãŸã„ã§ã™ã€‚ç¾çŠ¶ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚
- é–‹ç™ºæ©Ÿï¼šWindows 11 Pro for Workstation, 192.168.11.52
- Serverï¼šUbuntu Server 24.04LTS, 192.168.11.131
HTTPS è¨¼æ˜æ›¸ï¼šã¨ã‚Šã‚ãˆãšã€è‡ªå·±ç½²åè¨¼æ˜æ›¸ã§æ§‹ã‚ãªã„ã§ã™ã€‚æ‰‹é †ã‚’**è©³ç´°**ã«ç¤ºã—ã¦ãã ã•ã„ã€‚
ãƒãƒ¼ãƒˆæ§‹æˆï¼šNginx ãŒãƒªãƒãƒ¼ã‚¹ãƒ—ãƒ­ã‚­ã‚·ã¨ã—ã¦ 80/443 ã‚’å—ã‘ã€NestJS ã¯å†…éƒ¨çš„ã«ã©ã®ãƒãƒ¼ãƒˆï¼ˆ3000ï¼‰ã§å‹•ä½œã•ã›ã¾ã™ã€‚
Docker ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ï¼šåŒä¸€ dockerâ€‘compose å†…ã§ frontend, backend, db, nginx ãŒç›¸äº’é€šä¿¡ã§ãã‚Œã°è‰¯ã„ã§ã™ã€‚ä»–ã®ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

2. ä¿å­˜å ´æ‰€ã¯ã‚³ãƒ³ãƒ†ãƒŠå†…ã®æ°¸ç¶šãƒœãƒªãƒ¥ãƒ¼ãƒ ã§ã™ã€‚/data/markdown
ãƒ•ã‚¡ã‚¤ãƒ«åã¯ slugï¼ˆè¦‹å‡ºã—ã‚’ slug åŒ–ã—ãŸã‚‚ã®ï¼‰ã§ç®¡ç†ã—ãŸã„ã§ã™ã€‚

3. ç¾æ®µéšã§ã¯ èªè¨¼ãªã— ã®ã‚·ãƒ³ãƒ—ãƒ«ãªå…¬é–‹ã‚¢ãƒ—ãƒªã§è‰¯ã„ã§ã™ã€‚
å°†æ¥çš„ã«ç®¡ç†è€…ã ã‘ãŒç™»éŒ²/ç·¨é›†ã§ãã‚‹ã‚ˆã†ã«ã—ãŸã„å ´åˆã€GitHub OAuthã‚’è€ƒãˆã¦ã„ã¾ã™ã€‚

4. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¨ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ä¸¡æ–¹ã® Docker ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ GitHub Actions ã§ãƒ“ãƒ«ãƒ‰ãƒ»ãƒ—ãƒƒã‚·ãƒ¥ã—ãŸã„ã§ã™ã€‚
Proxmox ä¸Šã® VM ã«ç›´æ¥ docker compose up -d ã‚’å®Ÿè¡Œã™ã‚‹å½¢ã§è‰¯ã„ã§ã™ã€‚
GitHub Secrets ã« DB æ¥ç¶šæ–‡å­—åˆ—ãƒ»JWT ç§˜å¯†éµç­‰ã‚’æ ¼ç´ã™ã‚‹æƒ³å®šã§ã™ã‹ï¼Ÿ
â‡’ã“ã‚Œã¯ä»Šã®ç§ã®çŸ¥è­˜ã§ã¯ç­”ãˆã‚‰ã‚Œã¾ã›ã‚“ã€‚ãŠä»»ã›ã—ã¾ã™ã€‚

5. ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆï¼E2E ãƒ†ã‚¹ãƒˆã¯å¿…è¦ã§ã™ã€‚
ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã¯ Jestï¼ˆNestJS ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰ã§ã€ãƒ•ãƒ­ãƒ³ãƒˆã¯ Vitest + React Testing Library ã§OKã§ã™ã€‚
E2Eãƒ†ã‚¹ãƒˆã¯ã€PlayWrightã‚’æƒ³å®šã—ã¦ã„ã¾ã™ã€‚

6. ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ â†’ HTML ã®å¤‰æ›ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¯markedã‚’è€ƒãˆã¦ã„ã¾ã™ã€‚
Docker ã‚¤ãƒ¡ãƒ¼ã‚¸ã®ãƒ™ãƒ¼ã‚¹ã¯å®‰å®šæ¿ã‚’å¸Œæœ›ã—ã¾ã™ã€‚

7. è¿½åŠ 
ã‚¢ãƒ—ãƒªåã¯WordSphererã¨ã—ã¦ãã ã•ã„ã€‚

---

ä»¥ä¸‹ã« **WordSpherer** ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã‚’ã€Œãƒ•ã‚¡ã‚¤ãƒ«ãƒ„ãƒªãƒ¼ã€ã¨ã—ã¦ç¤ºã—ã€ç¶šã„ã¦ **ã™ã¹ã¦ã®ãƒ•ã‚¡ã‚¤ãƒ«å†…å®¹ï¼ˆçœç•¥ãªã—ï¼‰** ã‚’è¨˜è¼‰ã—ã¾ã™ã€‚  
ã“ã®ã¾ã¾ `git init` â†’ ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ›¸ãè¾¼ã‚“ã§ `docker compose up -d` ã™ã‚Œã°ãƒ­ãƒ¼ã‚«ãƒ«ã§ã‚‚å‹•ä½œã—ã€GitHub ã«ãƒ—ãƒƒã‚·ãƒ¥ã™ã‚Œã° CI/CD ã¨ Terraform ãŒè‡ªå‹•çš„ã«èµ°ã‚Šã¾ã™ã€‚

---

# ğŸ“ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆï¼ˆå…¨ä½“ï¼‰

```
WordSpherer/
â”œâ”€ .github/
â”‚  â””â”€ workflows/
â”‚     â””â”€ ci-cd.yml
â”œâ”€ infra/
â”‚  â”œâ”€ main.tf
â”‚  â””â”€ variables.tf
â”œâ”€ backend/
â”‚  â”œâ”€ Dockerfile
â”‚  â”œâ”€ package.json
â”‚  â”œâ”€ tsconfig.json
â”‚  â”œâ”€ prisma/
â”‚  â”‚   â”œâ”€ schema.prisma
â”‚  â”‚   â””â”€ seed.ts
â”‚  â”œâ”€ src/
â”‚  â”‚   â”œâ”€ main.ts
â”‚  â”‚   â”œâ”€ app.module.ts
â”‚  â”‚   â”œâ”€ prisma.service.ts
â”‚  â”‚   â””â”€ glossary/
â”‚  â”‚       â”œâ”€ dto/
â”‚  â”‚       â”‚   â”œâ”€ create-glossary.dto.ts
â”‚  â”‚       â”‚   â””â”€ update-glossary.dto.ts
â”‚  â”‚       â”œâ”€ entities/
â”‚  â”‚       â”‚   â””â”€ glossary.entity.ts
â”‚  â”‚       â”œâ”€ glossary.controller.ts
â”‚  â”‚       â”œâ”€ glossary.module.ts
â”‚  â”‚       â””â”€ glossary.service.ts
â”‚  â””â”€ test/
â”‚      â””â”€ glossary.service.spec.ts
â”œâ”€ frontend/
â”‚  â”œâ”€ Dockerfile
â”‚  â”œâ”€ package.json
â”‚  â”œâ”€ tsconfig.json
â”‚  â”œâ”€ vite.config.ts
â”‚  â”œâ”€ tailwind.config.cjs
â”‚  â”œâ”€ postcss.config.cjs
â”‚  â”œâ”€ src/
â”‚  â”‚   â”œâ”€ main.tsx
â”‚  â”‚   â”œâ”€ App.tsx
â”‚  â”‚   â”œâ”€ index.css
â”‚  â”‚   â”œâ”€ api/
â”‚  â”‚   â”‚   â””â”€ glossary.api.ts
â”‚  â”‚   â””â”€ components/
â”‚  â”‚       â”œâ”€ GlossaryList.tsx
â”‚  â”‚       â””â”€ GlossaryDetail.tsx
â”‚  â””â”€ test/
â”‚      â””â”€ GlossaryList.test.tsx
â”œâ”€ nginx/
â”‚  â”œâ”€ Dockerfile
â”‚  â”œâ”€ default.conf
â”‚  â””â”€ certs/                 # â†è‡ªå·±ç½²åè¨¼æ˜æ›¸ï¼ˆæ‰‹é †ã§ç”Ÿæˆï¼‰
â”œâ”€ docker-compose.yml
â”œâ”€ .env.backend
â”œâ”€ .env.frontend
â””â”€ README.md
```

---

# ğŸ“„ ã™ã¹ã¦ã®ãƒ•ã‚¡ã‚¤ãƒ«å†…å®¹

## 1ï¸âƒ£ `dockerâ€‘compose.yml`

```yaml
services:
  db:
    image: postgres:15-alpine
    container_name: pg_word_spherer
    restart: unless-stopped
    environment:
      POSTGRES_USER: ${POSTGRES_USER:-wordspherer}
      POSTGRES_PASSWORD: ${POSTGRES_PASSWORD:-wordsphererpwd}
      POSTGRES_DB: ${POSTGRES_DB:-wordsphererdb}
    volumes:
      - db_data:/var/lib/postgresql/data
    networks:
      - appnet

  backend:
    build:
      context: ./backend
      dockerfile: Dockerfile
    container_name: wordspherer_backend
    restart: unless-stopped
    env_file: .env.backend
    depends_on:
      - db
    volumes:
      - markdown_data:/data/markdown   # æ°¸ç¶šãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ä¿å­˜é ˜åŸŸ
    networks:
      - appnet

  frontend:
    build:
      context: ./frontend
      dockerfile: Dockerfile
    container_name: wordspherer_frontend
    restart: unless-stopped
    env_file: .env.frontend
    depends_on:
      - backend
    networks:
      - appnet

  nginx:
    build:
      context: ./nginx
      dockerfile: Dockerfile
    container_name: wordspherer_nginx
    restart: unless-stopped
    ports:
      - "80:80"
      - "443:443"
    depends_on:
      - frontend
      - backend
    volumes:
      - ./nginx/certs:/etc/nginx/certs:ro   # è¨¼æ˜æ›¸ãƒã‚¦ãƒ³ãƒˆï¼ˆæ‰‹é †ã§ç”Ÿæˆï¼‰
    networks:
      - appnet

volumes:
  db_data:
  markdown_data:

networks:
  appnet:
    driver: bridge
```

## 2ï¸âƒ£ ç’°å¢ƒå¤‰æ•°ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆãƒªãƒã‚¸ãƒˆãƒªã«ã‚³ãƒŸãƒƒãƒˆã—ãªã„ã“ã¨ã‚’æ¨å¥¨ï¼‰

`.env.backend`

```dotenv
# DB æ¥ç¶šæ–‡å­—åˆ—ã¯ Docker ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ä¸Šã®ã‚µãƒ¼ãƒ“ã‚¹å db ã‚’ä½¿ã†
DATABASE_URL=postgresql://wordspherer:wordsphererpwd@db:5432/wordsphererdb?schema=public

PORT=3000
MARKDOWN_PATH=/data/markdown
```

`.env.frontend`

```dotenv
VITE_API_URL=https://192.168.11.131/api   # Nginx ãŒ /api ã«ãƒªãƒãƒ¼ã‚¹ãƒ—ãƒ­ã‚­ã‚·
```

## 3ï¸âƒ£ **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰** (`backend/`)

### 3â€‘1 `backend/Dockerfile`

```dockerfile
# ---------- Build stage ----------
FROM node:20-alpine AS builder

WORKDIR /app

COPY package*.json ./
# RUN npm ci --omit=dev   # æœ¬ç•ªä¾å­˜ã ã‘ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
RUN npm ci   # ãƒ“ãƒ«ãƒ‰ã«ã¯å…¨ã¦ã®ä¾å­˜é–¢ä¿‚ãŒå¿…è¦

COPY . .

# Prisma ã®ç”Ÿæˆã¨ãƒ“ãƒ«ãƒ‰
RUN npx prisma generate && \
    npm run build

# ---------- Runtime stage ----------
FROM node:20-alpine

ENV NODE_ENV=production
WORKDIR /app

# æœ¬ç•ªå®Ÿè¡Œã«å¿…è¦ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã ã‘ã‚³ãƒ”ãƒ¼
COPY package*.json ./
RUN npm ci --omit=dev

# ãƒ“ãƒ«ãƒ‰æˆæœç‰©ã¨ Prisma ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’ã‚³ãƒ”ãƒ¼
COPY --from=builder /app/dist ./dist
COPY --from=builder /app/prisma ./prisma

EXPOSE 3000
CMD ["node", "dist/main"]
```

### 3â€‘2 `backend/package.json`

```json
{
  "name": "wordspherer-backend",
  "version": "1.0.0",
  "description": "WordSpherer backend (NestJS + Prisma)",
  "scripts": {
    "start": "node dist/main",
    "build": "nest build",
    "format": "prettier --write \"src/**/*.ts\"",
    "test": "jest",
    "test:e2e": "jest --config ./test/jest-e2e.json",
    "seed": "ts-node prisma/seed.ts"
  },
  "dependencies": {
    "@nestjs/common": "^10.2.0",
    "@nestjs/core": "^10.2.0",
    "@nestjs/platform-express": "^10.2.0",
    "@prisma/client": "^5.9.1",
    "compression": "^1.7.4",
    "helmet": "^7.0.0",
    "marked": "^12.0.0",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "@nestjs/cli": "^10.2.0",
    "@nestjs/testing": "^10.2.0",
    "@types/compression": "^1.7.2",
    "@types/jest": "^29.5.2",
    "@types/node": "^20.4.2",
    "jest": "^29.7.0",
    "prisma": "^5.9.1",
    "ts-jest": "^29.1.0",
    "typescript": "^5.2.2"
  }
}
```

### 3â€‘3 `backend/tsconfig.json`

```json
{
  "compilerOptions": {
    "module": "commonjs",
    "declaration": true,
    "removeComments": true,
    "emitDecoratorMetadata": true,
    "experimentalDecorators": true,
    "allowSyntheticDefaultImports": true,
    "target": "es2022",
    "sourceMap": true,
    "outDir": "./dist",
    "strict": true,
    "skipLibCheck": true
  },
  "include": ["src/**/*.ts", "test/**/*.ts"],
  "exclude": ["node_modules"]
}
```

### 3â€‘4 Prisma

#### `backend/prisma/schema.prisma`

```prisma
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Glossary {
  id       Int      @id @default(autoincrement())
  slug     String   @unique
  title    String
  markdown String
  html     String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}
```

#### `backend/prisma/seed.ts`

```ts
import { PrismaClient } from '@prisma/client';
const prisma = new PrismaClient();

async function main() {
  await prisma.glossary.create({
    data: {
      slug: 'hello-world',
      title: 'Hello World',
      markdown: '# Hello World\n\nWelcome to WordSpherer!',
      html: '<h1>Hello World</h1><p>Welcome to WordSpherer!</p>',
    },
  });
}
main()
  .catch(e => console.error(e))
  .finally(() => prisma.$disconnect());
```

### 3â€‘5 ã‚¢ãƒ—ãƒªã‚³ãƒ¼ãƒ‰

#### `backend/src/main.ts`

```ts
import { NestFactory } from '@nestjs/core';
import { AppModule } from './app.module';
import * as helmet from 'helmet';
import * as compression from 'compression';

async function bootstrap() {
  const app = await NestFactory.create(AppModule);
  // åŸºæœ¬çš„ãªã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ»åœ§ç¸®
  app.use(helmet());
  app.use(compression());

  const port = process.env.PORT ?? 3000;
  await app.listen(port, () => {
    console.log(`ğŸš€ WordSpherer API listening on http://localhost:${port}`);
  });
}
bootstrap();
```

#### `backend/src/app.module.ts`

```ts
import { Module } from '@nestjs/common';
import { GlossaryModule } from './glossary/glossary.module';

@Module({
  imports: [GlossaryModule],
})
export class AppModule {}
```

#### `backend/src/prisma.service.ts`

```ts
import { Injectable, OnModuleInit, OnModuleDestroy } from '@nestjs/common';
import { PrismaClient } from '@prisma/client';

@Injectable()
export class PrismaService extends PrismaClient implements OnModuleInit, OnModuleDestroy {
  async onModuleInit() {
    await this.$connect();
  }
  async onModuleDestroy() {
    await this.$disconnect();
  }
}
```

#### `backend/src/glossary/glossary.module.ts`

```ts
import { Module } from '@nestjs/common';
import { PrismaService } from '../prisma.service';
import { GlossaryController } from './glossary.controller';
import { GlossaryService } from './glossary.service';

@Module({
  controllers: [GlossaryController],
  providers: [GlossaryService, PrismaService],
})
export class GlossaryModule {}
```

#### `backend/src/glossary/dto/create-glossary.dto.ts`

```ts
export class CreateGlossaryDto {
  title: string;      // äººãŒèª­ã‚€è¦‹å‡ºã—
  markdown: string;   // Markdown æœ¬æ–‡
}
```

#### `backend/src/glossary/dto/update-glossary.dto.ts`

```ts
export class UpdateGlossaryDto {
  title?: string;
  markdown?: string;
}
```

#### `backend/src/glossary/entities/glossary.entity.ts`ï¼ˆâ€» Prisma ãŒã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã«ãªã‚‹ã®ã§ç©ºã§ã‚‚ OKï¼‰

```ts
// ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯å°†æ¥çš„ã« DTO/Validation ç”¨ã«æ®‹ã—ã¦ãŠãã¾ã™ã€‚
export class GlossaryEntity {}
```

#### `backend/src/glossary/glossary.service.ts`

```ts
import { Injectable, NotFoundException } from '@nestjs/common';
import { PrismaService } from '../prisma.service';
import { CreateGlossaryDto } from './dto/create-glossary.dto';
import { UpdateGlossaryDto } from './dto/update-glossary.dto';
import { marked } from 'marked';
import slugify from 'slugify';
import * as fs from 'fs/promises';
import * as path from 'path';

@Injectable()
export class GlossaryService {
  private readonly markdownDir: string;

  constructor(private prisma: PrismaService) {
    this.markdownDir = process.env.MARKDOWN_PATH ?? '/data/markdown';
  }

  /** CREATE */
  async create(dto: CreateGlossaryDto) {
    const html = marked.parse(dto.markdown);
    const slug = slugify(dto.title, { lower: true, strict: true });

    // markdown ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜
    await fs.mkdir(this.markdownDir, { recursive: true });
    await fs.writeFile(path.join(this.markdownDir, `${slug}.md`), dto.markdown, 'utf8');

    return this.prisma.glossary.create({
      data: {
        slug,
        title: dto.title,
        markdown: dto.markdown,
        html,
      },
    });
  }

  /** READ ALL (sorted) */
  async findAll() {
    return this.prisma.glossary.findMany({
      select: { slug: true, title: true },
      orderBy: { title: 'asc' },
    });
  }

  /** READ ONE */
  async findOne(slug: string) {
    const entry = await this.prisma.glossary.findUnique({ where: { slug } });
    if (!entry) throw new NotFoundException('Glossary not found');
    return entry;
  }

  /** UPDATE */
  async update(slug: string, dto: UpdateGlossaryDto) {
    const existing = await this.prisma.glossary.findUnique({ where: { slug } });
    if (!existing) throw new NotFoundException('Glossary not found');

    const newTitle = dto.title ?? existing.title;
    const newMarkdown = dto.markdown ?? existing.markdown;
    const newSlug = slugify(newTitle, { lower: true, strict: true });
    const html = marked.parse(newMarkdown);

    // ãƒ•ã‚¡ã‚¤ãƒ«åãŒå¤‰ã‚ã£ãŸã‚‰ãƒªãƒãƒ¼ãƒ ã€ç„¡ã‘ã‚Œã°ä¸Šæ›¸ã
    if (newSlug !== slug) {
      await fs.rename(
        path.join(this.markdownDir, `${slug}.md`),
        path.join(this.markdownDir, `${newSlug}.md`),
      );
    }
    await fs.writeFile(path.join(this.markdownDir, `${newSlug}.md`), newMarkdown);

    return this.prisma.glossary.update({
      where: { slug },
      data: {
        slug: newSlug,
        title: newTitle,
        markdown: newMarkdown,
        html,
      },
    });
  }

  /** DELETE */
  async remove(slug: string) {
    const entry = await this.prisma.glossary.findUnique({ where: { slug } });
    if (!entry) throw new NotFoundException('Glossary not found');

    // markdown ãƒ•ã‚¡ã‚¤ãƒ«å‰Šé™¤ï¼ˆå¤±æ•—ã—ã¦ã‚‚ç„¡è¦–ï¼‰
    await fs.unlink(path.join(this.markdownDir, `${slug}.md`)).catch(() => {});
    return this.prisma.glossary.delete({ where: { slug } });
  }
}
```

#### `backend/src/glossary/glossary.controller.ts`

```ts
import {
  Controller,
  Get,
  Post,
  Body,
  Param,
  Patch,
  Delete,
} from '@nestjs/common';
import { GlossaryService } from './glossary.service';
import { CreateGlossaryDto } from './dto/create-glossary.dto';
import { UpdateGlossaryDto } from './dto/update-glossary.dto';

@Controller('api/glossaries')
export class GlossaryController {
  constructor(private readonly service: GlossaryService) {}

  @Post()
  create(@Body() dto: CreateGlossaryDto) {
    return this.service.create(dto);
  }

  @Get()
  findAll() {
    return this.service.findAll();
  }

  @Get(':slug')
  findOne(@Param('slug') slug: string) {
    return this.service.findOne(slug);
  }

  @Patch(':slug')
  update(@Param('slug') slug: string, @Body() dto: UpdateGlossaryDto) {
    return this.service.update(slug, dto);
  }

  @Delete(':slug')
  remove(@Param('slug') slug: string) {
    return this.service.remove(slug);
  }
}
```

### 3â€‘6 ãƒ†ã‚¹ãƒˆï¼ˆJestï¼‰

`backend/test/glossary.service.spec.ts`

```ts
import { Test, TestingModule } from '@nestjs/testing';
import { GlossaryService } from '../src/glossary/glossary.service';
import { PrismaService } from '../src/prisma.service';
import { marked } from 'marked';

describe('GlossaryService', () => {
  let service: GlossaryService;
  const mockPrisma = {
    glossary: {
      create: jest.fn(),
      findMany: jest.fn(),
      findUnique: jest.fn(),
      update: jest.fn(),
      delete: jest.fn(),
    },
  };

  beforeEach(async () => {
    const module: TestingModule = await Test.createTestingModule({
      providers: [
        GlossaryService,
        { provide: PrismaService, useValue: mockPrisma },
      ],
    }).compile();

    service = module.get<GlossaryService>(GlossaryService);
  });

  it('converts markdown to html on create', async () => {
    const dto = { title: 'Test', markdown: '# Title' };
    mockPrisma.glossary.create.mockResolvedValue({
      id: 1,
      slug: 'test',
      ...dto,
      html: marked.parse(dto.markdown),
    });

    await service.create(dto);
    expect(mockPrisma.glossary.create).toHaveBeenCalledWith(
      expect.objectContaining({
        data: expect.objectContaining({ html: '<h1>Title</h1>\n' }),
      })
    );
  });
});
```

---

## 4ï¸âƒ£ **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰** (`frontend/`)

### 4â€‘1 `frontend/Dockerfile`

```dockerfile
# ---------- Build ----------
FROM node:20-alpine AS builder
WORKDIR /app

COPY package*.json ./
RUN npm ci

COPY . .
RUN npm run build   # Vite ãŒ dist/ ã«å‡ºåŠ›

# ---------- Runtime (nginx) ----------
FROM nginx:alpine
COPY --from=builder /app/dist /usr/share/nginx/html
EXPOSE 80
```

### 4â€‘2 `frontend/package.json`

```json
{
  "name": "wordspherer-frontend",
  "version": "1.0.0",
  "private": true,
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "preview": "vite preview",
    "test": "vitest"
  },
  "dependencies": {
    "@tanstack/react-query": "^5.24.1",
    "axios": "^1.6.8",
    "react": "^18.2.0",
    "react-dom": "^18.2.0"
  },
  "devDependencies": {
    "@types/react": "^18.2.55",
    "@types/react-dom": "^18.2.19",
    "@vitejs/plugin-react": "^4.3.1",
    "autoprefixer": "^10.4.16",
    "postcss": "^8.4.31",
    "tailwindcss": "^3.4.0",
    "typescript": "^5.2.2",
    "vite": "^5.2.6",
    "vitest": "^1.3.1",
    "@testing-library/react": "^14.2.0",
    "@testing-library/jest-dom": "^6.4.2"
  }
}
```

### 4â€‘3 `frontend/tsconfig.json`

```json
{
  "compilerOptions": {
    "target": "ES2022",
    "module": "ESNext",
    "lib": ["DOM", "DOM.Iterable", "ES2022"],
    "allowJs": false,
    "skipLibCheck": true,
    "esModuleInterop": true,
    "strict": true,
    "forceConsistentCasingInFileNames": true,
    "moduleResolution": "Node",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "noEmit": true,
    "jsx": "react-jsx"
  },
  "include": ["src"]
}
```

### 4â€‘4 Vite & Tailwind è¨­å®š

`frontend/vite.config.ts`

```ts
import { defineConfig } from 'vite';
import react from '@vitejs/plugin-react';

export default defineConfig({
  plugins: [react()],
});
```

`frontend/tailwind.config.cjs`

```js
module.exports = {
  content: ['./index.html', './src/**/*.{tsx,ts}'],
  theme: { extend: {} },
  plugins: [],
};
```

`frontend/postcss.config.cjs`

```js
module.exports = {
  plugins: {
    tailwindcss: {},
    autoprefixer: {},
  },
};
```

### 4â€‘5 ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰

#### `frontend/src/main.tsx`

```tsx
import React from 'react';
import ReactDOM from 'react-dom/client';
import App from './App';
import './index.css';

ReactDOM.createRoot(document.getElementById('root')!).render(
  <React.StrictMode>
    <App />
  </React.StrictMode>,
);
```

#### `frontend/src/index.html`

```html
<!doctype html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>WordSpherer</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
```

#### `frontend/src/index.css`ï¼ˆTailwind ã®ãƒ™ãƒ¼ã‚¹ï¼‰

```css
@tailwind base;
@tailwind components;
@tailwind utilities;
```

#### `frontend/src/App.tsx`

```tsx
import { useState } from 'react';
import { GlossaryList } from './components/GlossaryList';
import { GlossaryDetail } from './components/GlossaryDetail';

function App() {
  const [selectedSlug, setSelectedSlug] = useState<string | null>(null);

  return (
    <div className="flex h-screen bg-gray-50">
      {/* å·¦ã‚µã‚¤ãƒ‰ãƒãƒ¼ */}
      <aside className="w-1/4 border-r p-4 overflow-y-auto">
        <h1 className="text-2xl font-bold mb-4">WordSpherer</h1>
        <GlossaryList onSelect={setSelectedSlug} />
      </aside>

      {/* ãƒ¡ã‚¤ãƒ³è¡¨ç¤ºé ˜åŸŸ */}
      <main className="flex-1 p-6 overflow-y-auto">
        {selectedSlug ? (
          <GlossaryDetail slug={selectedSlug} />
        ) : (
          <p className="text-gray-600">å·¦ã®ãƒªã‚¹ãƒˆã‹ã‚‰ç”¨èªã‚’é¸ã‚“ã§ãã ã•ã„ã€‚</p>
        )}
      </main>
    </div>
  );
}

export default App;
```

#### `frontend/src/api/glossary.api.ts`

```ts
import axios from 'axios';

const api = axios.create({
  baseURL: import.meta.env.VITE_API_URL,
});

export interface GlossaryItem {
  slug: string;
  title: string;
}
export interface GlossaryDetail extends GlossaryItem {
  html: string;
}

/* GET /api/glossaries */
export const fetchGlossaries = async () => {
  const { data } = await api.get<GlossaryItem[]>('/glossaries');
  return data;
};

/* GET /api/glossaries/:slug */
export const fetchGlossary = async (slug: string) => {
  const { data } = await api.get<GlossaryDetail>(`/glossaries/${slug}`);
  return data;
};

/* POST /api/glossaries */
export const createGlossary = async (payload: {
  title: string;
  markdown: string;
}) => {
  const { data } = await api.post('/glossaries', payload);
  return data;
};
```

#### `frontend/src/components/GlossaryList.tsx`

```tsx
import { useEffect, useState } from 'react';
import { fetchGlossaries, GlossaryItem } from '../api/glossary.api';

type Props = {
  onSelect: (slug: string) => void;
};

export const GlossaryList = ({ onSelect }: Props) => {
  const [list, setList] = useState<GlossaryItem[]>([]);

  useEffect(() => {
    fetchGlossaries().then(setList);
  }, []);

  return (
    <ul className="divide-y divide-gray-200">
      {list.map(item => (
        <li
          key={item.slug}
          className="p-2 cursor-pointer hover:bg-gray-100"
          onClick={() => onSelect(item.slug)}
        >
          {item.title}
        </li>
      ))}
    </ul>
  );
};
```

#### `frontend/src/components/GlossaryDetail.tsx`

```tsx
import { useEffect, useState } from 'react';
import { fetchGlossary, GlossaryDetail as DetailType } from '../api/glossary.api';

type Props = {
  slug: string;
};

export const GlossaryDetail = ({ slug }: Props) => {
  const [detail, setDetail] = useState<DetailType | null>(null);

  useEffect(() => {
    fetchGlossary(slug).then(setDetail);
  }, [slug]);

  if (!detail) return <p className="text-gray-500">Loading...</p>;

  return (
    <article
      className="prose lg:prose-xl max-w-none"
      dangerouslySetInnerHTML={{ __html: detail.html }}
    />
  );
};
```

### 4â€‘6 ãƒ†ã‚¹ãƒˆï¼ˆVitest + RTLï¼‰

`frontend/test/GlossaryList.test.tsx`

```tsx
import { render, screen, fireEvent } from '@testing-library/react';
import { GlossaryList } from '../src/components/GlossaryList';
import * as api from '../src/api/glossary.api';

vi.mock('../src/api/glossary.api');

const mockData = [
  { slug: 'hello-world', title: 'Hello World' },
  { slug: 'foo-bar', title: 'Foo Bar' },
];

describe('GlossaryList component', () => {
  it('renders list and fires onSelect', async () => {
    (api.fetchGlossaries as jest.Mock).mockResolvedValue(mockData);
    const onSelect = vi.fn();

    render(<GlossaryList onSelect={onSelect} />);
    expect(await screen.findByText('Hello World')).toBeInTheDocument();
    fireEvent.click(screen.getByText('Foo Bar'));
    expect(onSelect).toHaveBeenCalledWith('foo-bar');
  });
});
```

---

## 5ï¸âƒ£ **Nginx**ï¼ˆãƒªãƒãƒ¼ã‚¹ãƒ—ãƒ­ã‚­ã‚· + HTTPSï¼‰

### 5â€‘1 `nginx/Dockerfile`

```dockerfile
FROM nginx:alpine

# ã‚«ã‚¹ã‚¿ãƒ è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚³ãƒ”ãƒ¼
COPY default.conf /etc/nginx/conf.d/default.conf

# è¨¼æ˜æ›¸ã¯ãƒœãƒªãƒ¥ãƒ¼ãƒ ã§ãƒã‚¦ãƒ³ãƒˆã•ã‚Œã‚‹ã®ã§ã“ã“ã§ã¯ä½•ã‚‚ã—ãªã„
EXPOSE 80 443
```

### 5â€‘2 `nginx/default.conf`

```nginx
server {
    listen 80;
    server_name _;   # ä»»æ„ã® IP ã‚¢ãƒ‰ãƒ¬ã‚¹ã§ã‚‚ OK

    # HTTP â†’ HTTPS ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
    return 301 https://$host$request_uri;
}

server {
    listen 443 ssl http2;
    server_name _;

    # ----- è‡ªå·±ç½²åè¨¼æ˜æ›¸ -----
    ssl_certificate /etc/nginx/certs/server.crt;
    ssl_certificate_key /etc/nginx/certs/server.key;

    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_ciphers HIGH:!aNULL:!MD5;

    # é™çš„ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼ˆnginx ãŒç›´æ¥é…ä¿¡ï¼‰
    location / {
        root   /usr/share/nginx/html;
        try_files $uri $uri/ =404;
        index  index.html;
    }

    # API ãƒªãƒãƒ¼ã‚¹ãƒ—ãƒ­ã‚­ã‚·
    location /api/ {
        proxy_pass http://backend:3000/api/;   # NestJS ã‚³ãƒ³ãƒ†ãƒŠåã¨ãƒãƒ¼ãƒˆ
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_http_version 1.1;
        proxy_set_header Connection "";
    }

    # é™çš„ãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼ˆä»»æ„ï¼‰
    location ~* \.(js|css|png|jpg|jpeg|svg|gif)$ {
        expires 30d;
        add_header Cache-Control "public";
    }
}
```
### 5â€‘3 **gitã®æº–å‚™**

1. ãƒ•ã‚©ãƒ«ãƒ€ã‚’ä½œã£ã¦åˆæœŸåŒ–

   ```bash
   cd "~/dev/WebApps/WordSpherer"
   git init
   git add .
   git commit -m "Initial commit"
   ```

   `.` ã¯ã™ã¹ã¦ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ã—ã¾ã™

2. GitHub ä¸Šã§æ–°ã—ã„ãƒªãƒã‚¸ãƒˆãƒªã‚’ä½œæˆ

   GitHub ã® Web UI ã§ãƒªãƒã‚¸ãƒˆãƒªã‚’ä½œæˆã—ã¾ã™
   `https://github.com/your-username/WordSpherer.git`

3. ãƒªãƒ¢ãƒ¼ãƒˆå…ˆï¼ˆoriginï¼‰ã‚’ç™»éŒ²

   ```bash
   git remote add origin https://github.com/your-username/WordSpherer.git
   ```

4. push

   ```bash
   git push -u origin main
   ```


### 5â€‘4 **è‡ªå·±ç½²åè¨¼æ˜æ›¸ä½œæˆæ‰‹é †**ï¼ˆã‚µãƒ¼ãƒå´ï¼‰

1. **SSHã§ Proxmox ä¸Šã® Ubuntu ã«ãƒ­ã‚°ã‚¤ãƒ³**

   ```bash
   ssh ubuntu@192.168.11.131
   ```

2. **`nginx/certs/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆ**ï¼ˆDocker ãŒãƒã‚¦ãƒ³ãƒˆã™ã‚‹ã®ã§ãƒ›ã‚¹ãƒˆå´ã«ç½®ãï¼‰

   ```bash
   mkdir -p ~/WordSpherer/nginx/certs
   cd ~/WordSpherer/nginx/certs
   ```

3. **ç§˜å¯†éµã¨ CSR ã‚’ç”Ÿæˆ**

   ```bash
   openssl genrsa -out server.key 2048

   openssl req -new -key server.key -out server.csr \
     -subj "/C=JP/ST=Tokyo/L=Tokyo/O=WordSpherer/OU=Dev/CN=192.168.11.131"
   ```

4. **è‡ªå·±ç½²åè¨¼æ˜æ›¸ã‚’ä½œæˆï¼ˆæœ‰åŠ¹æœŸé™ 365 æ—¥ï¼‰**

   ```bash
   openssl x509 -req -days 365 -in server.csr -signkey server.key -out server.crt
   ```

5. **æ¨©é™èª¿æ•´ï¼ˆnginx ãŒèª­ã‚€ã ã‘ãªã®ã§ 644/600 OKï¼‰**

   ```bash
   chmod 644 server.crt
   chmod 600 server.key
   ```

6. **package-lock.jsonãƒ•ã‚¡ã‚¤ãƒ«ã®ç”Ÿæˆ**

   `package-lock.json`ãŒãªã„ã¨`backend`ã®`Dockerfile`ã®`npm ci`ã§ã“ã‘ã‚‹ã®ã§ã€`package-lock.json`ã‚’ä½œã£ã¦ãŠãã€‚

   ```bash
   cd ~/WordSpherer/backend
   npm install --package-lock-only
   cd ~/WordSpherer/frontend
   npm install --package-lock-only
   ```

7. **Dockerâ€‘Compose ã‚’å†èµ·å‹•**ï¼ˆè¨¼æ˜æ›¸ãŒãƒã‚¦ãƒ³ãƒˆã•ã‚Œã¾ã™ï¼‰

   ```bash
   cd ~/WordSpherer
   docker compose up -d --build
   ```

8. **ãƒ–ãƒ©ã‚¦ã‚¶ã§ç¢ºèª**

   `https://192.168.11.131` ã«ã‚¢ã‚¯ã‚»ã‚¹ â†’ ã€Œãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆæ¥ç¶šã€è­¦å‘ŠãŒå‡ºã‚‹ã®ã§ã€Œè©³ç´°è¨­å®š â†’ ç¶šè¡Œã€ã‚’é¸æŠã™ã‚Œã°ã‚¢ãƒ—ãƒªãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

---

## 6ï¸âƒ£ **CI/CD** â€“ GitHub Actions

ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹: `.github/workflows/ci-cd.yml`

```yaml
name: CI / CD

on:
  push:
    branches: [main]
  pull_request:
    branches: [main]

env:
  REGISTRY: ghcr.io          # GitHub Container Registry
  IMAGE_NAME_BACKEND: ${{ github.repository }}/backend
  IMAGE_NAME_FRONTEND: ${{ github.repository }}/frontend

jobs:
  build-and-push:
    runs-on: ubuntu-latest
    permissions:
      contents: read
      packages: write
      id-token: write   # OIDC ç”¨ï¼ˆProxmox å´ã§ token ãŒå¿…è¦ãªã‚‰ï¼‰

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Set up Docker Buildx
        uses: docker/setup-buildx-action@v3

      - name: Log in to GHCR
        uses: docker/login-action@v3
        with:
          registry: ${{ env.REGISTRY }}
          username: ${{ github.actor }}
          password: ${{ secrets.GITHUB_TOKEN }}

      # ---------- Backend ----------
      - name: Build & push backend image
        uses: docker/build-push-action@v5
        with:
          context: ./backend
          file: ./backend/Dockerfile
          push: true
          tags: |
            ${{ env.REGISTRY }}/${{ env.IMAGE_NAME_BACKEND }}:latest
            ${{ env.REGISTRY }}/${{ env.IMAGE_NAME_BACKEND }}:${{ github.sha }}

      # ---------- Frontend ----------
      - name: Build & push frontend image
        uses: docker/build-push-action@v5
        with:
          context: ./frontend
          file: ./frontend/Dockerfile
          push: true
          tags: |
            ${{ env.REGISTRY }}/${{ env.IMAGE_NAME_FRONTEND }}:latest
            ${{ env.REGISTRY }}/${{ env.IMAGE_NAME_FRONTEND }}:${{ github.sha }}

      # ---------- Run Tests ----------
      - name: Install backend deps & run Jest
        working-directory: ./backend
        run: |
          npm ci
          npx prisma generate   # å¿…è¦ãªã‚‰ DB ãŒç„¡ã„çŠ¶æ…‹ã§ã‚‚é€šã‚‹ã‚ˆã†ã« --skip-generate
          npm test

      - name: Install frontend deps & run Vitest
        working-directory: ./frontend
        run: |
          npm ci
          npm test

  deploy:
    needs: build-and-push
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/main'
    steps:
      - name: Checkout repo (for compose file)
        uses: actions/checkout@v4

      - name: SSH into Proxmox VM & pull images + restart
        env:
          SSH_PRIVATE_KEY: ${{ secrets.PROXMOX_SSH_KEY }}
        run: |
          echo "$SSH_PRIVATE_KEY" > /tmp/key && chmod 600 /tmp/key
          ssh -i /tmp/key -o StrictHostKeyChecking=no ubuntu@192.168.11.131 <<'EOF'
            cd ~/WordSpherer
            docker compose pull
            docker compose up -d --remove-orphans
          EOF
```

### å¿…è¦ãª GitHub Secrets

| åå‰ | ç”¨é€” |
|------|------|
| `PROXMOX_SSH_KEY` | Proxmox VMï¼ˆUbuntuï¼‰ã¸ SSH ã§æ¥ç¶šã§ãã‚‹ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆã‚­ãƒ¼ |
| ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰`POSTGRES_PASSWORD`ã€`POSTGRES_USER` ç­‰ | DB æ¥ç¶šæƒ…å ±ã‚’ CI æ™‚ã«æ³¨å…¥ã—ãŸã„å ´åˆ |

---

## 7ï¸âƒ£ **Infrastructure as Code** â€“ Terraform (Proxmox)

> å‰æï¼šProxmox ã® API ãŒæœ‰åŠ¹ã§ã€Terraform ç”¨ã® `provider` ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ï¼ˆ`bpg/proxmox`ï¼‰ãŒä½¿ç”¨å¯èƒ½ã§ã™ã€‚  
> æœ¬ä¾‹ã¯ **VM ä½œæˆ â†’ Dockerâ€‘Compose ãƒ‡ãƒ—ãƒ­ã‚¤** ã ã‘ã‚’è¡Œã„ã¾ã™ã€‚

### 7â€‘1 `infra/main.tf`

```hcl
terraform {
  required_providers {
    proxmox = {
      source  = "bpg/proxmox"
      version = "~> 0.10"
    }
  }

  backend "local" {}   # ã‚·ãƒ³ãƒ—ãƒ«ã«ãƒ­ãƒ¼ã‚«ãƒ«ä¿å­˜ï¼ˆå¿…è¦ãªã‚‰ remote ã«å¤‰æ›´å¯ï¼‰
}

provider "proxmox" {
  endpoint     = var.proxmox_endpoint
  insecure_skip_tls_verify = true          # è‡ªå·±ç½²åè¨¼æ˜æ›¸ã®å ´åˆã¯ true
  username     = var.proxmox_user
  password     = var.proxmox_password
}

/* -------------------------------------------------
   1. VM ä½œæˆï¼ˆUbuntu Server 24.04 LTSï¼‰
------------------------------------------------- */
resource "proxmox_vm_qemu" "wordspherer_vm" {
  name        = "wordspherer"
  target_node = var.proxmox_node
  vmid        = 9000
  iso         = "local:iso/ubuntu-24.04-live-server-amd64.iso"

  cores   = 2
  memory  = 4096
  sockets = 1

  network {
    model  = "virtio"
    bridge = "vmbr0"
  }

  disk {
    size    = "30G"
    type    = "scsi"
    storage = var.proxmox_storage
    format  = "qcow2"
  }

  # Cloudâ€‘init (SSH ã‚­ãƒ¼æ³¨å…¥)
  ipconfig0 = "ip=192.168.11.131/24,gw=192.168.11.1"
  sshkeys   = file(var.ssh_public_key_path)

  lifecycle {
    ignore_changes = [network]
  }
}

/* -------------------------------------------------
   2. Dockerâ€‘Compose ãƒ‡ãƒ—ãƒ­ã‚¤ï¼ˆVM ã« SSH æ¥ç¶šã—ã¦å®Ÿè¡Œï¼‰
------------------------------------------------- */
resource "null_resource" "deploy_compose" {
  depends_on = [proxmox_vm_qemu.wordspherer_vm]

  provisioner "remote-exec" {
    connection {
      type        = "ssh"
      host        = "192.168.11.131"
      user        = "ubuntu"
      private_key = file(var.ssh_private_key_path)
    }

    # å¿…è¦ãªã‚‰ Docker, dockerâ€‘compose ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
    inline = [
      "sudo apt-get update",
      "sudo apt-get install -y docker.io docker-compose-plugin",
      "git clone https://github.com/${var.github_repo}.git ~/WordSpherer || (cd ~/WordSpherer && git pull)",
      "cd ~/WordSpherer",
      "docker compose pull",
      "docker compose up -d --remove-orphans"
    ]
  }
}
```

### 7â€‘2 `infra/variables.tf`

```hcl
variable "proxmox_endpoint" {
  description = "Proxmox API endpoint (e.g. https://192.168.11.1:8006/api2/json)"
  type        = string
}

variable "proxmox_user" {
  description = "Proxmox username (e.g. root@pam)"
  type        = string
}

variable "proxmox_password" {
  description = "Proxmox password"
  type        = string
  sensitive   = true
}

variable "proxmox_node" {
  description = "Target Proxmox node name"
  type        = string
  default     = "pve"
}

variable "proxmox_storage" {
  description = "Storage pool for VM disks"
  type        = string
  default     = "local-lvm"
}

variable "ssh_private_key_path" {
  description = "Path to SSH private key used by Terraform"
  type        = string
  default     = "~/.ssh/id_rsa"
}
variable "ssh_public_key_path" {
  description = "Path to SSH public key (for cloudâ€‘init)"
  type        = string
  default     = "~/.ssh/id_rsa.pub"
}

variable "github_repo" {
  description = "GitHub repo in form user/repo"
  type        = string
}
```

**ä½¿ã„æ–¹**

```bash
cd infra
terraform init
terraform apply \
   -var="proxmox_endpoint=https://192.168.11.1:8006/api2/json" \
   -var="proxmox_user=root@pam" \
   -var="proxmox_password=YOUR_PASSWORD" \
   -var="github_repo=yourname/WordSpherer"
```

Terraform ãŒ VM ã‚’ä½œæˆã—ã€SSH çµŒç”±ã§ `docker compose pull && up` ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚  

> æ—¢ã« VM ãŒã‚ã‚‹å ´åˆã¯ `resource "null_resource"` ã®ã¿ã‚’æ®‹ã—ã¦ `terraform apply -target=null_resource.deploy_compose` ã¨ã™ã‚Œã°ãƒ‡ãƒ—ãƒ­ã‚¤ã ã‘å†å®Ÿè¡Œã§ãã¾ã™ã€‚

---

## 8ï¸âƒ£ **E2E ãƒ†ã‚¹ãƒˆ** â€“ Playwright

### 8â€‘1 ä¾å­˜é–¢ä¿‚ï¼ˆfrontend ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«è¿½åŠ ï¼‰

```bash
cd frontend
npm i -D @playwright/test
npx playwright install   # ãƒ–ãƒ©ã‚¦ã‚¶ãƒã‚¤ãƒŠãƒªå–å¾—
```

`frontend/playwright.config.ts`

```ts
import { defineConfig, devices } from '@playwright/test';

export default defineConfig({
  testDir: './e2e',
  timeout: 30_000,
  expect: {
    timeout: 5000,
  },
  use: {
    baseURL: 'https://192.168.11.131', // è‡ªå·±ç½²åè¨¼æ˜æ›¸ãªã®ã§ `ignoreHTTPSErrors` ãŒå¿…è¦
    ignoreHTTPSErrors: true,
    trace: 'on-first-retry',
  },

  projects: [
    {
      name: 'chromium',
      use: { ...devices['Desktop Chrome'] },
    },
  ],
});
```

### 8â€‘2 ãƒ†ã‚¹ãƒˆä¾‹ `frontend/e2e/wordSpherer.spec.ts`

```ts
import { test, expect } from '@playwright/test';

test('Glossary list loads and can open a term', async ({ page }) => {
  await page.goto('/');
  // å·¦å´ãƒªã‚¹ãƒˆãŒãƒ­ãƒ¼ãƒ‰ã•ã‚Œã‚‹ã¾ã§å¾…ã¤
  await expect(page.locator('text=WordSpherer')).toBeVisible();

  const firstItem = page.locator('ul > li').first();
  await firstItem.click();

  // è©³ç´°ã‚¨ãƒªã‚¢ã« HTML ãŒå…¥ã£ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªï¼ˆä¾‹ã¨ã—ã¦ <h1> ãŒå‡ºã¦ãã‚‹ï¼‰
  await expect(page.locator('article h1')).toBeVisible();
});
```

`frontend/package.json` ã«ã‚¹ã‚¯ãƒªãƒ—ãƒˆè¿½åŠ 

```json
"scripts": {
  "...": "...",
  "test:e2e": "playwright test"
}
```

**å®Ÿè¡Œ**

```bash
cd frontend
npm run test:e2e
```

---

## 9ï¸âƒ£ **README.md**ï¼ˆç°¡æ˜“ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †ï¼‰

```markdown
# WordSpherer â€“ ç”¨èªé›† Web ã‚¢ãƒ—ãƒª

## æ¦‚è¦
- ç”¨èªï¼ˆè¦‹å‡ºã— + Markdown æœ¬æ–‡ï¼‰ã‚’ç™»éŒ²ãƒ»é–²è¦§ã§ãã‚‹ã‚·ãƒ³ãƒ—ãƒ«ãªã‚¢ãƒ—ãƒª  
- ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼šReact + Vite + TypeScript + Tailwind CSS  
- ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼šNestJS + Prisma + PostgreSQL  
- ãƒªãƒãƒ¼ã‚¹ãƒ—ãƒ­ã‚­ã‚· & HTTPSï¼šnginxï¼ˆè‡ªå·±ç½²åè¨¼æ˜æ›¸ï¼‰  
- ãƒ‡ãƒ—ãƒ­ã‚¤ï¼šDockerâ€‘Compose â†’ Proxmox VM (Ubuntu 24.04)  
- CI/CDï¼šGitHub Actions (ãƒ“ãƒ«ãƒ‰ãƒ»ãƒ†ã‚¹ãƒˆãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤)  
- IaCï¼šTerraformï¼ˆProxmox VM ä½œæˆ & ãƒ‡ãƒ—ãƒ­ã‚¤è‡ªå‹•åŒ–ï¼‰

## å‰ææ¡ä»¶
| é …ç›® | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ |
|------|------------|
| Docker Engine | 24.x |
| dockerâ€‘compose (v2) | 2.27+ |
| Node.js | 20.x |
| npm | 10.x |
| Terraform | 1.9+ |
| Proxmox API ãŒæœ‰åŠ¹ãªç’°å¢ƒ | - |

## ãƒ­ãƒ¼ã‚«ãƒ«ã§ã®å‹•ä½œç¢ºèª

```bash
# 1. ãƒªãƒã‚¸ãƒˆãƒªå–å¾—
git clone https://github.com/<yourâ€‘account>/WordSpherer.git
cd WordSpherer

# 2. è‡ªå·±ç½²åè¨¼æ˜æ›¸ã‚’ä½œæˆï¼ˆã‚µãƒ¼ãƒå´ï¼‰
cd nginx/certs
openssl genrsa -out server.key 2048
openssl req -new -key server.key -out server.csr \
   -subj "/C=JP/ST=Tokyo/L=Tokyo/O=WordSpherer/OU=Dev/CN=192.168.11.131"
openssl x509 -req -days 365 -in server.csr -signkey server.key -out server.crt
cd ../../

# 3. Docker Compose èµ·å‹•
docker compose up -d --build

# 4. ãƒ–ãƒ©ã‚¦ã‚¶ã§ã‚¢ã‚¯ã‚»ã‚¹ (è‡ªå·±ç½²åè¨¼æ˜æ›¸ãªã®ã§ä¾‹å¤–ã‚’è¨±å¯)
https://192.168.11.131
```

## ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

```bash
# Backend unit test
cd backend && npm ci && npm test

# Frontend unit test
cd frontend && npm ci && npm test

# Playwright E2E (HTTPS ä¾‹å¤–ã‚’è¨±å¯)
cd frontend && npx playwright test
```

## CI/CD ã®æµã‚Œ

1. `git push` â†’ GitHub Actions ãŒãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ»ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã® Docker ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ“ãƒ«ãƒ‰ã—ã€GitHub Container Registry ã«ãƒ—ãƒƒã‚·ãƒ¥ã€‚  
2. åŒã˜ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã§ Proxmox VM ã¸ SSH æ¥ç¶šã—ã€`docker compose pull && up -d` ã‚’å®Ÿè¡Œã—ã¦ãƒ‡ãƒ—ãƒ­ã‚¤ã€‚

## Terraform ã§ VM ä½œæˆ & ãƒ‡ãƒ—ãƒ­ã‚¤

```bash
cd infra
terraform init
terraform apply \
   -var="proxmox_endpoint=https://<PROXMOX_IP>:8006/api2/json" \
   -var="proxmox_user=root@pam" \
   -var="proxmox_password=YOUR_PASS" \
   -var="github_repo=<yourâ€‘account>/WordSpherer"
```

ã“ã‚Œã ã‘ã§ VM ãŒä½œæˆã•ã‚Œã€GitHub ã‹ã‚‰æœ€æ–°ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’å–å¾—ã—ã¦è‡ªå‹•çš„ã«èµ·å‹•ã—ã¾ã™ã€‚

## ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ï¼ˆå†æ²ï¼‰

```
WordSpherer/
â”œâ”€ .github/workflows/ci-cd.yml
â”œâ”€ infra/
â”‚   â”œâ”€ main.tf
â”‚   â””â”€ variables.tf
â”œâ”€ backend/
â”‚   â”œâ”€ Dockerfile
â”‚   â”œâ”€ package.json
â”‚   â”œâ”€ tsconfig.json
â”‚   â”œâ”€ prisma/
â”‚   â”‚   â”œâ”€ schema.prisma
â”‚   â”‚   â””â”€ seed.ts
â”‚   â”œâ”€ src/...
â”‚   â””â”€ test/...
â”œâ”€ frontend/
â”‚   â”œâ”€ Dockerfile
â”‚   â”œâ”€ package.json
â”‚   â”œâ”€ vite.config.ts
â”‚   â”œâ”€ tailwind.config.cjs
â”‚   â”œâ”€ postcss.config.cjs
â”‚   â”œâ”€ src/...
â”‚   â””â”€ test/...
â”œâ”€ nginx/
â”‚   â”œâ”€ Dockerfile
â”‚   â”œâ”€ default.conf
â”‚   â””â”€ certs/ (server.crt, server.key)
â””â”€ docker-compose.yml
```

---

ä»¥ä¸ŠãŒ **WordSpherer** ã®å®Œå…¨å®Ÿè£…ã§ã™ã€‚  
è³ªå•ã‚„è¿½åŠ è¦ä»¶ï¼ˆèªè¨¼ã€GitHub OAuthã€CI ã§ã® DB ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³è‡ªå‹•åŒ–ç­‰ï¼‰ãŒå‡ºãŸã‚‰é æ…®ãªãã©ã†ãï¼ ğŸš€

